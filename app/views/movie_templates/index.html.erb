<div class="container col-xxl-8 px-6 py-5">
  <div class="row flex-lg-row-reverse align-items-center g-5 py-2 movie-header">
    <div class="col-10 col-sm-8 col-lg-6">
      <button type="button" class="btn btn-primary btn-lg px-4 me-md-2" data-bs-toggle="modal" data-bs-target="#addMovieModal">Add a Movie</button>
    </div>
    <div class="col-lg-6">
      <h1 class="display-5 fw-bold text-body-emphasis lh-1 mb-3" >All Movies</h1>
    </div>
  </div>
</div>

<div class="modal fade" id="addMovieModal" tabindex="-1" aria-labelledby="addMovieModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="addMovieModal">Add a Movie</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form action="/insert_movie" method="post">
          <div class="mb-3">
            <label for="title_box" class="form-label">Title</label>
            <input type="text" class="form-control" id="title_box" name="query_title">
          </div>

          <div class="mb-3">
            <label for="year_box" class="form-label">Year</label>
            <input type="text" class="form-control" id="year_box" name="query_year">
          </div>

          <div class="mb-3">
            <label for="duration_box" class="form-label">Duration</label>
            <input type="text" class="form-control" id="duration_box" name="query_duration">
          </div>

          <div class="mb-3">
            <label for="description_box" class="form-label">Description</label>
            <textarea type="text" class="form-control" id="duration_box" name="query_description"></textarea>
          </div>

          <div class="mb-3">
            <label for="image_box" class="form-label">Image</label>
            <input type="text" class="form-control" id="image_box" name="query_image">
          </div>

          <div class="mb-3">
            <label for="director_name_box" class="form-label">Director</label>
            <!-- 
    <input type="text" class="form-control" id="director_id_box" name="query_director_id">   -->

            <select name="query_director_name" id="director_name_box" class="form-select" >
              <option  selected>Choose a Director</option>
              <% @list_of_movies.each do |movie| %>
                <option value="<%= movie.director_id %>"><%= movie.director.name %></option>
              <%end%>
            </select>

          </div>

          <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary">Add movie</button>
      </div>

        </form>

      </div>
      
    </div>
  </div>
</div>

<table border="1">
  <tr>
    <th>
      ID
    </th>

    <th>
      Image
    </th>

    <th>
      Title
    </th>

    <th>
      Year
    </th>

    <th>
      Director
    </th>

    <th>
    </th>
  </tr>

  <% @list_of_movies.each do |a_movie| %>
    <tr>
      <td>
        <%= a_movie.id %>
      </td>

      <td>
        <img src="<%= a_movie.image %>" style="width:250px;">
      </td>

      <td>
        <%= a_movie.title %>
      </td>

      <td>
        <%= a_movie.year %>
      </td>

      <td>
        <%= a_movie.director.name %>
      </td>

      <td>
        <a href="/movies/<%= a_movie.id %>">
          Show details
        </a>
      </td>
    </tr>
  <% end %>
</table>
